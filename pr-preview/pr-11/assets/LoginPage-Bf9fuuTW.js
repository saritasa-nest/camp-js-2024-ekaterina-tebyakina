import{r as i,t as v,x as _,l as e,y as j,A as S,z as L,D as w,E as y}from"./index-DTqZiZvu.js";import{z as t,u as E,P,t as T,h as b}from"./handleServerErrors-Bba91k-Z.js";import{T as c}from"./TextField-DLLbfXkg.js";const W="_formWrapper_1xnmn_1",N="_header_1xnmn_11",A="_form_1xnmn_1",F="_errorMessage_1xnmn_26",o={formWrapper:W,header:N,form:A,errorMessage:F},M=t.object({email:t.string().min(1,{message:"This field is required"}).email("Please provide a valid email"),password:t.string().min(1,{message:"This field is required"})}),k=()=>{const d=v(),p=_(),[n,m]=i.useState(!1),{register:l,handleSubmit:g,setError:h,formState:{errors:r,isValid:u}}=E({mode:"onBlur",resolver:T(M)}),f=async s=>{m(!0);try{const a=await S.login(s);L.saveTokens(a),d(w()),p(y)}catch(a){b(a,h,s)}m(!1)},x=s=>{!n&&u&&f(s)};return e.jsxs("div",{className:o.formWrapper,children:[e.jsx("h2",{className:o.header,children:"Log in"}),e.jsxs("form",{onSubmit:g(x),className:o.form,children:[e.jsx(c,{label:"Email",type:"email",variant:"outlined",fullWidth:!0,placeholder:"ivan.pupkin@gmail.com",...l("email",{required:!0}),error:!!r.email,helperText:r.email?r.email.message:""}),e.jsx(c,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,placeholder:"veryStrongPassW0rd",...l("password"),error:!!r.password,helperText:r.password?r.password.message:""}),r.root?e.jsx("span",{className:o.errorMessage,children:r.root.message}):"",n?e.jsx(P,{}):null,e.jsx(j,{type:"submit",variant:"outlined",children:"Login"})]})]})},q=i.memo(k),z=()=>e.jsx(e.Fragment,{children:e.jsx(q,{})}),U=i.memo(z);export{U as LoginPage};
