import{r as d,t as w,x as y,l as s,y as P,A as N,z as j,D as T,E as S}from"./index-DdD-FxzJ.js";import{z as r,u as b,P as W,t as _,h as E}from"./handleServerErrors-C45Nrbpn.js";import{T as t}from"./TextField-BQmbOzTv.js";const R="_formWrapper_1nmxp_1",q="_header_1nmxp_11",F="_form_1nmxp_1",m={formWrapper:R,header:q,form:F},A=r.object({email:r.string().min(1,{message:"This field is required"}).email("Please provide a valid email"),firstName:r.string().min(1,{message:"This field is required"}),lastName:r.string().min(1,{message:"This field is required"}),password:r.string().min(1,{message:"This field is required"}),retypedPassword:r.string().min(1,{message:"This field is required"})}).refine(i=>i.password===i.retypedPassword,{message:"Passwords do not match",path:["retypedPassword"]}),k=()=>{var u;const i=w(),c=y(),[l,p]=d.useState(!1),{register:a,handleSubmit:h,setError:g,formState:{errors:e,isValid:f}}=b({mode:"onBlur",resolver:_(A)}),x=async o=>{p(!0);try{const n=await N.register(o);j.saveTokens(n),i(T()),c(S)}catch(n){E(n,g,o)}p(!1)},v=o=>{!l&&f&&x(o)};return s.jsxs("div",{className:m.formWrapper,children:[s.jsx("h2",{className:m.header,children:"Register"}),s.jsxs("form",{onSubmit:h(v),className:m.form,children:[s.jsx(t,{label:"Email",type:"email",variant:"outlined",fullWidth:!0,placeholder:"ivan.pupkin@gmail.com",...a("email",{required:!0}),error:e.email!=null,helperText:e.email?e.email.message:""}),s.jsx(t,{label:"First name",type:"text",variant:"outlined",fullWidth:!0,placeholder:"Ivan",...a("firstName"),error:e.firstName!=null,helperText:e.firstName?(u=e.firstName)==null?void 0:u.message:""}),s.jsx(t,{label:"Last name",type:"text",variant:"outlined",fullWidth:!0,placeholder:"Pupkin",...a("lastName"),error:e.lastName!=null,helperText:e.lastName?e.lastName.message:""}),s.jsx(t,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,placeholder:"veryStrongPassW0rd",...a("password"),error:e.password!=null,helperText:e.password?e.password.message:""}),s.jsx(t,{label:"Confirm the password",type:"password",variant:"outlined",fullWidth:!0,placeholder:"veryStrongPassW0rd",...a("retypedPassword"),error:e.retypedPassword!=null,helperText:e.retypedPassword?e.retypedPassword.message:""}),l?s.jsx(W,{}):null,s.jsx(P,{type:"submit",variant:"outlined",disabled:l,children:"Register"})]})]})},L=d.memo(k),z=()=>s.jsx(s.Fragment,{children:s.jsx(L,{})}),U=d.memo(z);export{U as RegistrationPage};
