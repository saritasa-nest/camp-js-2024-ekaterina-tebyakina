import{r as m,t as w,x as y,l as s,y as P,A as N,z as j,D as T,E as S}from"./index-DgZFkfM_.js";import{z as r,u as W,P as b,t as _,h as E}from"./handleServerErrors-hQ7BnFg4.js";import{T as t}from"./TextField-BEVj3AQO.js";const R="_formWrapper_1nmxp_1",q="_header_1nmxp_11",F="_form_1nmxp_1",n={formWrapper:R,header:q,form:F},A=r.object({email:r.string().min(1,{message:"This field is required"}).email("Please provide a valid email"),firstName:r.string().min(1,{message:"This field is required"}),lastName:r.string().min(1,{message:"This field is required"}),password:r.string().min(1,{message:"This field is required"}),retypedPassword:r.string().min(1,{message:"This field is required"})}).refine(i=>i.password===i.retypedPassword,{message:"Passwords do not match",path:["retypedPassword"]}),k=()=>{var c;const i=w(),h=y(),[d,p]=m.useState(!1),{register:a,handleSubmit:u,setError:g,formState:{errors:e,isValid:f}}=W({mode:"onBlur",resolver:_(A)}),x=async o=>{p(!0);try{const l=await N.register(o);j.saveTokens(l),i(T()),h(S)}catch(l){E(l,g,o)}p(!1)},v=o=>{!d&&f&&x(o)};return s.jsxs("div",{className:n.formWrapper,children:[s.jsx("h2",{className:n.header,children:"Register"}),s.jsxs("form",{onSubmit:u(v),className:n.form,children:[s.jsx(t,{label:"Email",type:"email",variant:"outlined",fullWidth:!0,placeholder:"ivan.pupkin@gmail.com",...a("email",{required:!0}),error:!!e.email,helperText:e.email?e.email.message:""}),s.jsx(t,{label:"First name",type:"text",variant:"outlined",fullWidth:!0,placeholder:"Ivan",...a("firstName"),error:!!e.firstName,helperText:e.firstName?(c=e.firstName)==null?void 0:c.message:""}),s.jsx(t,{label:"Last name",type:"text",variant:"outlined",fullWidth:!0,placeholder:"Pupkin",...a("lastName"),error:!!e.lastName,helperText:e.lastName?e.lastName.message:""}),s.jsx(t,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,placeholder:"veryStrongPassW0rd",...a("password"),error:!!e.password,helperText:e.password?e.password.message:""}),s.jsx(t,{label:"Confirm the password",type:"password",variant:"outlined",fullWidth:!0,placeholder:"veryStrongPassW0rd",...a("retypedPassword"),error:!!e.retypedPassword,helperText:e.retypedPassword?e.retypedPassword.message:""}),d?s.jsx(b,{}):null,s.jsx(P,{type:"submit",variant:"outlined",children:"Register"})]})]})},L=m.memo(k),z=()=>s.jsx(s.Fragment,{children:s.jsx(L,{})}),U=m.memo(z);export{U as RegistrationPage};
