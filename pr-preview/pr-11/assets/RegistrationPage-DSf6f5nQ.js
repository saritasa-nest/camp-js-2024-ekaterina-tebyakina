import{r as n,t as w,x as y,l as r,y as P,A as N,z as _,D as j,E as T}from"./index-DUVDcEOC.js";import{z as s,u as S,P as q,t as W,h as b}from"./handleServerErrors-iqaxEDw3.js";import{T as t}from"./TextField-BlD4L8PC.js";const E="_formWrapper_1nmxp_1",R="_header_1nmxp_11",F="_form_1nmxp_1",d={formWrapper:E,header:R,form:F},A=s.object({email:s.string({required_error:"This field is required"}).email("Please provide a valid email"),firstName:s.string({required_error:"This field is required"}),lastName:s.string({required_error:"This field is required"}),password:s.string({required_error:"This field is required"}),retypedPassword:s.string({required_error:"This field is required"})}).refine(i=>i.password===i.retypedPassword,{message:"Passwords do not match",path:["retypedPassword"]}),k=()=>{var u;const i=w(),c=y(),[m,p]=n.useState(!1),{register:a,handleSubmit:h,setError:f,formState:{errors:e,isValid:g}}=S({mode:"onBlur",resolver:W(A)}),x=async o=>{p(!0);try{const l=await N.register(o);_.saveTokens(l),i(j()),c(T)}catch(l){b(l,f,o)}p(!1)},v=o=>{!m&&g&&x(o)};return r.jsxs("div",{className:d.formWrapper,children:[r.jsx("h2",{className:d.header,children:"Register"}),r.jsxs("form",{onSubmit:h(v),className:d.form,children:[r.jsx(t,{label:"Email",type:"email",variant:"outlined",fullWidth:!0,placeholder:"ivan.pupkin@gmail.com",...a("email",{required:!0}),error:!!e.email,helperText:e.email?e.email.message:""}),r.jsx(t,{label:"First name",type:"text",variant:"outlined",fullWidth:!0,placeholder:"Ivan",...a("firstName"),error:!!e.firstName,helperText:e.firstName?(u=e.firstName)==null?void 0:u.message:""}),r.jsx(t,{label:"Last name",type:"text",variant:"outlined",fullWidth:!0,placeholder:"Pupkin",...a("lastName"),error:!!e.lastName,helperText:e.lastName?e.lastName.message:""}),r.jsx(t,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,placeholder:"veryStrongPassW0rd",...a("password"),error:!!e.password,helperText:e.password?e.password.message:""}),r.jsx(t,{label:"Confirm the password",type:"password",variant:"outlined",fullWidth:!0,placeholder:"veryStrongPassW0rd",...a("retypedPassword"),error:!!e.retypedPassword,helperText:e.retypedPassword?e.retypedPassword.message:""}),m?r.jsx(q,{}):null,r.jsx(P,{type:"submit",variant:"outlined",children:"Register"})]})]})},L=n.memo(k),z=()=>r.jsx(r.Fragment,{children:r.jsx(L,{})}),U=n.memo(z);export{U as RegistrationPage};
