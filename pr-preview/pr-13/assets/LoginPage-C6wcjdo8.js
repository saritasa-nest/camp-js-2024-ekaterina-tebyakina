import{r as n,l as v,x as j,j as e,q as _,A as S,y as L,z as b,C as w}from"./index-D7jTh2nF.js";import{z as i,u as y,P,t as T,h as E}from"./handleServerErrors-DB6pINmg.js";import{T as c}from"./TextField-vCobeyp1.js";const W="_formWrapper_1xnmn_1",N="_header_1xnmn_11",A="_form_1xnmn_1",F="_errorMessage_1xnmn_26",a={formWrapper:W,header:N,form:A,errorMessage:F},M=i.object({email:i.string().min(1,{message:"This field is required"}).email("Please provide a valid email"),password:i.string().min(1,{message:"This field is required"})}),q=()=>{const d=v(),p=j(),[o,l]=n.useState(!1),{register:m,handleSubmit:g,setError:u,formState:{errors:s,isValid:h}}=y({mode:"onBlur",resolver:T(M)}),f=async r=>{l(!0);try{const t=await S.login(r);L.saveTokens(t),d(b()),p(w)}catch(t){E(t,u,r)}l(!1)},x=r=>{!o&&h&&f(r)};return e.jsxs("div",{className:a.formWrapper,children:[e.jsx("h2",{className:a.header,children:"Log in"}),e.jsxs("form",{onSubmit:g(x),className:a.form,children:[e.jsx(c,{label:"Email",type:"email",variant:"outlined",fullWidth:!0,placeholder:"ivan.pupkin@gmail.com",...m("email",{required:!0}),error:s.email!=null,helperText:s.email?s.email.message:""}),e.jsx(c,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,placeholder:"veryStrongPassW0rd",...m("password"),error:s.password!=null,helperText:s.password?s.password.message:""}),s.root?e.jsx("span",{className:a.errorMessage,children:s.root.message}):"",o?e.jsx(P,{}):null,e.jsx(_,{type:"submit",variant:"outlined",disabled:o,children:"Login"})]})]})},k=n.memo(q),z=()=>e.jsx(e.Fragment,{children:e.jsx(k,{})}),U=n.memo(z);export{U as LoginPage};
