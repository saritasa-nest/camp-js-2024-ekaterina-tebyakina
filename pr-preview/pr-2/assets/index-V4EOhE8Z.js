var p=Object.defineProperty;var x=(t,s,e)=>s in t?p(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var n=(t,s,e)=>x(t,typeof s!="symbol"?s+"":s,e);import"./modulepreload-polyfill-B5Qt9EMX.js";class o{constructor(){n(this,"subscribers",[])}subscribe(s){this.getSubscriberIndex(s)===-1&&this.subscribers.push(s)}unsubscribe(s){const e=this.getSubscriberIndex(s);e!==-1&&this.subscribers.splice(e,1)}notify(s){this.subscribers.forEach(e=>e.update(s))}getSubscriberIndex(s){return this.subscribers.findIndex(e=>e===s)}}const S=6;class P extends o{constructor(){super(...arguments);n(this,"sidesCount",S)}update(e){this.notify(e)}notify(e){const r=this.rollDice();this.subscribers.forEach((c,i)=>{e===i&&c.update(r)})}rollDice(){return 1+Math.floor(Math.random()*this.sidesCount)}}const I=2;class R extends o{constructor(e=I){super();n(this,"currentPlayerIndex",-1);this.playersCount=e}calculateCurrentPlayerIndex(){if(this.currentPlayerIndex+1<this.playersCount){this.currentPlayerIndex+=1;return}this.currentPlayerIndex=0}next(){this.calculateCurrentPlayerIndex(),this.notify(this.currentPlayerIndex)}}const w=21;class b extends o{constructor(){super(...arguments);n(this,"diceResults",[]);n(this,"winStatus",!1)}checkIsWin(){this.calculateSumOfPoints()>=w&&(this.winStatus=!0)}calculateSumOfPoints(){return this.diceResults.reduce((e,r)=>e+r,0)}notify(e){this.subscribers.forEach(r=>r.update(e))}update(e){this.diceResults.push(e),this.checkIsWin(),this.notify({winStatus:this.winStatus,diceResult:e})}}class y{constructor(s){this.layout=s}update(s){this.layout.innerText=`${this.layout.innerText} ${s.diceResult.toString()}`}}const C="#e0baba";class h extends y{update(s){if(this.layout.innerText=`${this.layout.innerText} ${s.diceResult.toString()}`,s.winStatus){const e=this.layout.parentNode;e.style.backgroundColor=C}}}const f=new R,d=new P,a=new b,l=new b;f.subscribe(d);d.subscribe(a);d.subscribe(l);N();const u=document.querySelector(".dice-roll-button");u==null||u.addEventListener("click",()=>{f.next()});function N(){const t=document.querySelector("#first-player-results"),s=new h(t),e=document.querySelector("#second-player-results"),r=new h(e),c=document.querySelector("#all-results"),i=new y(c);a.subscribe(s),l.subscribe(r),a.subscribe(i),l.subscribe(i)}
