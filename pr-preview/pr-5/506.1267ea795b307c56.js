"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[506],{1506:(V,f,l)=>{l.r(f),l.d(f,{RegistrationFormComponent:()=>W});var r=l(7788),C=l(7212),a=l(7222),p=l(6375),F=l(4587),h=l(2221),_=l(5860);class R extends _.b{constructor(i){super(),this.email=i.email,this.firstName=i.firstName,this.lastName=i.lastName,this.password=i.password}}var c,x=l(1051),G=l(7236),N=l(922),k=l(6409),w=l(8578);function M(t,i){return o=>{const s=o.controls[t],m=o.controls[i];return!s||!m||m.errors&&!m.errors.mustMatch||m.setErrors(s.value!==m.value?{mustMatch:!0}:null),null}}function j(t,i){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Email is required."),r.k0s())}function y(t,i){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Enter a valid email address."),r.k0s())}function b(t,i){if(1&t&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&t){let o;const e=r.XpG(2);r.R7$(),r.JRh(null==(o=e.registrationFormGroup.get("email"))?null:o.getError("serverError"))}}function P(t,i){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"First name is required."),r.k0s())}function $(t,i){if(1&t&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&t){let o;const e=r.XpG(2);r.R7$(),r.JRh(null==(o=e.registrationFormGroup.get("firstName"))?null:o.getError("serverError"))}}function T(t,i){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Last name is required."),r.k0s())}function D(t,i){if(1&t&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&t){let o;const e=r.XpG(2);r.R7$(),r.JRh(null==(o=e.registrationFormGroup.get("lastName"))?null:o.getError("serverError"))}}function S(t,i){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Password is required."),r.k0s())}function X(t,i){if(1&t&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&t){let o;const e=r.XpG(2);r.R7$(),r.JRh(null==(o=e.registrationFormGroup.get("password"))?null:o.getError("serverError"))}}function J(t,i){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Retyped password is required."),r.k0s())}function z(t,i){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Passwords must match."),r.k0s())}function I(t,i){if(1&t&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&t){const o=r.XpG(2);r.R7$(),r.JRh(o.registrationFormGroup.getError("serverError"))}}function Q(t,i){if(1&t){const o=r.RV6();r.j41(0,"form",3),r.bIt("ngSubmit",function(){r.eBV(o);const s=r.XpG();return r.Njj(s.onRegistrationSubmit())}),r.j41(1,"mat-form-field",4)(2,"mat-label"),r.EFF(3,"Email"),r.k0s(),r.nrm(4,"input",5),r.DNE(5,j,2,0,"mat-error")(6,y,2,0,"mat-error")(7,b,2,1,"mat-error"),r.k0s(),r.j41(8,"mat-form-field",4)(9,"mat-label"),r.EFF(10,"First Name"),r.k0s(),r.nrm(11,"input",6),r.DNE(12,P,2,0,"mat-error")(13,$,2,1,"mat-error"),r.k0s(),r.j41(14,"mat-form-field",4)(15,"mat-label"),r.EFF(16,"Last Name"),r.k0s(),r.nrm(17,"input",7),r.DNE(18,T,2,0,"mat-error")(19,D,2,1,"mat-error"),r.k0s(),r.j41(20,"mat-form-field",4)(21,"mat-label"),r.EFF(22,"Password"),r.k0s(),r.nrm(23,"input",8),r.DNE(24,S,2,0,"mat-error")(25,X,2,1,"mat-error"),r.k0s(),r.j41(26,"mat-form-field",4)(27,"mat-label"),r.EFF(28," Repeat the password"),r.k0s(),r.nrm(29,"input",9),r.DNE(30,J,2,0,"mat-error")(31,z,2,0,"mat-error"),r.k0s(),r.DNE(32,I,2,1,"mat-error"),r.j41(33,"button",10),r.EFF(34,"Register"),r.k0s()()}if(2&t){let o,e,s,m,d,E,g,v,u;const n=r.XpG();r.Y8G("formGroup",n.registrationFormGroup),r.R7$(5),r.vxM(null!=(o=n.registrationFormGroup.get("email"))&&o.hasError("required")&&null!=(o=n.registrationFormGroup.get("email"))&&o.touched?5:null!=(o=n.registrationFormGroup.get("email"))&&o.hasError("email")&&null!=(o=n.registrationFormGroup.get("email"))&&o.touched?6:-1),r.R7$(2),r.vxM(null!=(e=n.registrationFormGroup.get("email"))&&e.hasError("serverError")?7:-1),r.R7$(5),r.vxM(null!=(s=n.registrationFormGroup.get("firstName"))&&s.touched&&null!=(s=n.registrationFormGroup.get("firstName"))&&s.hasError("required")?12:-1),r.R7$(),r.vxM(null!=(m=n.registrationFormGroup.get("firstName"))&&m.hasError("serverError")?13:-1),r.R7$(5),r.vxM(null!=(d=n.registrationFormGroup.get("lastName"))&&d.touched&&null!=(d=n.registrationFormGroup.get("lastName"))&&d.hasError("required")?18:-1),r.R7$(),r.vxM(null!=(E=n.registrationFormGroup.get("lastName"))&&E.hasError("serverError")?19:-1),r.R7$(5),r.vxM(null!=(g=n.registrationFormGroup.get("password"))&&g.touched&&null!=(g=n.registrationFormGroup.get("password"))&&g.hasError("required")?24:-1),r.R7$(),r.vxM(null!=(v=n.registrationFormGroup.get("password"))&&v.hasError("serverError")?25:-1),r.R7$(5),r.vxM(null!=(u=n.registrationFormGroup.get("retypedPassword"))&&u.touched&&null!=(u=n.registrationFormGroup.get("retypedPassword"))&&u.hasError("required")?30:null!=(u=n.registrationFormGroup.get("retypedPassword"))&&u.hasError("mustMatch")?31:-1),r.R7$(2),r.vxM(n.registrationFormGroup.hasError("serverError")?32:-1),r.R7$(),r.Y8G("disabled",n.registrationFormGroup.invalid)}}(c||(c={})).initialize=function i(o){return o.group({email:new a.MJ("",{nonNullable:!0,validators:[a.k0.required,a.k0.email]}),firstName:new a.MJ("",{nonNullable:!0,validators:[a.k0.required]}),lastName:new a.MJ("",{nonNullable:!0,validators:[a.k0.required]}),password:new a.MJ("",{nonNullable:!0,validators:[a.k0.required]}),retypedPassword:new a.MJ("",{nonNullable:!0,validators:[a.k0.required]})},{validators:M("password","retypedPassword")})};let W=(()=>{class t{constructor(){this.routerPaths=w.A,this.authorizationApiService=(0,r.WQX)(x.V),this.formBuilder=(0,r.WQX)(a.Qk),this.router=(0,r.WQX)(N.Ix),this.destroyRef=(0,r.WQX)(r.abz),this.changeDetectorRef=(0,r.WQX)(r.gRc),this.registrationFormGroup=c.initialize(this.formBuilder)}onRegistrationSubmit(){const o=new R(this.registrationFormGroup.getRawValue());this.authorizationApiService.register(o).pipe((0,C.pQ)(this.destroyRef),(0,G.M)({next:()=>{this.router.navigate([this.routerPaths.Main])},error:e=>{e instanceof k.yz&&this.handleServerError(e)}})).subscribe()}handleServerError(o){let e="";o.error.errors.forEach(s=>{s.attribute&&this.registrationFormGroup?.contains(s.attribute)?this.registrationFormGroup.controls[s.attribute].setErrors({serverError:s.detail}):e+=`${s.detail}\n`}),this.registrationFormGroup.setErrors({serverError:e}),this.changeDetectorRef.markForCheck()}static#r=this.\u0275fac=function(e){return new(e||t)};static#t=this.\u0275cmp=r.VBU({type:t,selectors:[["camp-registration-form"]],standalone:!0,features:[r.aNF],decls:4,vars:1,consts:[[1,"registration-form-wrapper"],[1,"registration-header"],[1,"registration-form",3,"formGroup"],[1,"registration-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"registration-form__field"],["matInput","","type","email","placeholder","ivan.pupkin@gmail.com","formControlName","email"],["matInput","","type","text","placeholder","Ivan","formControlName","firstName"],["matInput","","type","text","placeholder","Pupkin","formControlName","lastName"],["matInput","","type","password","placeholder","veryStrongPassW0rd","formControlName","password"],["matInput","","type","password","placeholder","veryStrongPassW0rd","formControlName","retypedPassword","type","password"],["mat-raised-button","","type","submit",3,"disabled"]],template:function(e,s){1&e&&(r.j41(0,"div",0)(1,"h2",1),r.EFF(2,"Registration"),r.k0s(),r.DNE(3,Q,35,12,"form",2),r.k0s()),2&e&&(r.R7$(3),r.vxM(s.registrationFormGroup?3:-1))},dependencies:[a.X1,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,p.RG,p.rl,p.nJ,p.TL,F.fS,F.fg,h.Hl,h.$z],styles:["[_nghost-%COMP%]{--registration-form-min-width: 360px}.registration-form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;align-content:center;padding:var(--space-xl)}.registration-header[_ngcontent-%COMP%]{font-size:var(--font-size-xl)}.registration-form[_ngcontent-%COMP%]{min-width:var(--registration-form-min-width);padding:var(--space-m);border-radius:24px;border:2px var(--border-color) solid;display:flex;flex-direction:column;gap:var(--space-s);align-items:center}.registration-form__field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}return t})()}}]);