"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[543],{4543:(J,p,s)=>{s.r(p),s.d(p,{RegistrationFormComponent:()=>Y});var r=s(7788),C=s(7212),m=s(7222),u=s(6375),g=s(4587),F=s(2221),S=s(5860);class k extends S.b{constructor(n){super(),this.email=n.email,this.firstName=n.firstName,this.lastName=n.lastName,this.password=n.password}}var y=s(1051),N=s(7236),_=s(922),$=s(6409),j=s(8578);function w(t,n){return i=>{const e=i.controls[t],a=i.controls[n];return!e||!a||a.errors&&!a.errors.mustMatch||a.setErrors(e.value!==a.value?{mustMatch:!0}:null),null}}let M=(()=>{class t{constructor(){this.formBuilder=(0,r.WQX)(m.Qk),this.form=this.initialize()}initialize(){return this.formBuilder.group({email:this.formBuilder.control("",[m.k0.required,m.k0.email]),firstName:this.formBuilder.control("",[m.k0.required]),lastName:this.formBuilder.control("",[m.k0.required]),password:this.formBuilder.control("",[m.k0.required]),retypedPassword:this.formBuilder.control("",[m.k0.required])},{validators:w("password","retypedPassword")})}handleServerError(i){let o="";i.error.errors.forEach(e=>{e.attribute&&this.form.contains(e.attribute)?this.form.controls[e.attribute].setErrors({serverError:e.detail}):o+=`${e.detail}\n`}),this.form.setErrors({serverError:o})}static#r=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=r.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function P(t,n){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Email is required."),r.k0s())}function b(t,n){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Enter a valid email address."),r.k0s())}function x(t,n){if(1&t&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&t){let i;const o=r.XpG();r.R7$(),r.JRh(null==(i=o.registrationFormService.form.get("email"))?null:i.getError("serverError"))}}function G(t,n){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"First name is required."),r.k0s())}function T(t,n){if(1&t&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&t){let i;const o=r.XpG();r.R7$(),r.JRh(null==(i=o.registrationFormService.form.get("firstName"))?null:i.getError("serverError"))}}function D(t,n){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Last name is required."),r.k0s())}function X(t,n){if(1&t&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&t){let i;const o=r.XpG();r.R7$(),r.JRh(null==(i=o.registrationFormService.form.get("lastName"))?null:i.getError("serverError"))}}function z(t,n){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Password is required."),r.k0s())}function B(t,n){if(1&t&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&t){let i;const o=r.XpG();r.R7$(),r.JRh(null==(i=o.registrationFormService.form.get("password"))?null:i.getError("serverError"))}}function I(t,n){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Retyped password is required."),r.k0s())}function Q(t,n){1&t&&(r.j41(0,"mat-error"),r.EFF(1,"Passwords must match."),r.k0s())}function W(t,n){if(1&t&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&t){const i=r.XpG();r.R7$(),r.JRh(i.registrationFormService.form.getError("serverError"))}}let Y=(()=>{class t{constructor(){this.routerPaths=j.A,this.registrationFormService=(0,r.WQX)(M),this.authorizationApiService=(0,r.WQX)(y.V),this.router=(0,r.WQX)(_.Ix),this.destroyRef=(0,r.WQX)(r.abz),this.changeDetectorRef=(0,r.WQX)(r.gRc)}onRegistrationSubmit(){const i=new k(this.registrationFormService.form.getRawValue());this.authorizationApiService.register(i).pipe((0,C.pQ)(this.destroyRef),(0,N.M)({next:()=>{this.router.navigate([this.routerPaths.Main])},error:o=>{o instanceof $.yz&&(this.registrationFormService.handleServerError(o),this.changeDetectorRef.markForCheck())}})).subscribe()}static#r=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=r.VBU({type:t,selectors:[["camp-registration-form"]],standalone:!0,features:[r.aNF],decls:38,vars:17,consts:[[1,"registration-form-wrapper"],[1,"registration-header"],[1,"registration-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"registration-form__field"],["matInput","","type","email","placeholder","ivan.pupkin@gmail.com",3,"formControl"],["matInput","","type","text","placeholder","Ivan",3,"formControl"],["matInput","","type","text","placeholder","Pupkin",3,"formControl"],["matInput","","type","password","placeholder","veryStrongPassW0rd",3,"formControl"],["matInput","","type","password","placeholder","veryStrongPassW0rd","type","password",3,"formControl"],["mat-raised-button","","type","submit",3,"disabled"]],template:function(o,e){if(1&o&&(r.j41(0,"div",0)(1,"h2",1),r.EFF(2,"Registration"),r.k0s(),r.j41(3,"form",2),r.bIt("ngSubmit",function(){return e.onRegistrationSubmit()}),r.j41(4,"mat-form-field",3)(5,"mat-label"),r.EFF(6,"Email"),r.k0s(),r.nrm(7,"input",4),r.DNE(8,P,2,0,"mat-error")(9,b,2,0,"mat-error")(10,x,2,1,"mat-error"),r.k0s(),r.j41(11,"mat-form-field",3)(12,"mat-label"),r.EFF(13,"First Name"),r.k0s(),r.nrm(14,"input",5),r.DNE(15,G,2,0,"mat-error")(16,T,2,1,"mat-error"),r.k0s(),r.j41(17,"mat-form-field",3)(18,"mat-label"),r.EFF(19,"Last Name"),r.k0s(),r.nrm(20,"input",6),r.DNE(21,D,2,0,"mat-error")(22,X,2,1,"mat-error"),r.k0s(),r.j41(23,"mat-form-field",3)(24,"mat-label"),r.EFF(25,"Password"),r.k0s(),r.nrm(26,"input",7),r.DNE(27,z,2,0,"mat-error")(28,B,2,1,"mat-error"),r.k0s(),r.j41(29,"mat-form-field",3)(30,"mat-label"),r.EFF(31," Repeat the password"),r.k0s(),r.nrm(32,"input",8),r.DNE(33,I,2,0,"mat-error")(34,Q,2,0,"mat-error"),r.k0s(),r.DNE(35,W,2,1,"mat-error"),r.j41(36,"button",9),r.EFF(37," Register "),r.k0s()()()),2&o){let a,h,f,v,c,E,d,R,l;r.R7$(3),r.Y8G("formGroup",e.registrationFormService.form),r.R7$(4),r.Y8G("formControl",e.registrationFormService.form.controls.email),r.R7$(),r.vxM(null!=(a=e.registrationFormService.form.get("email"))&&a.hasError("required")&&null!=(a=e.registrationFormService.form.get("email"))&&a.touched?8:null!=(a=e.registrationFormService.form.get("email"))&&a.hasError("email")&&null!=(a=e.registrationFormService.form.get("email"))&&a.touched?9:-1),r.R7$(2),r.vxM(null!=(h=e.registrationFormService.form.get("email"))&&h.hasError("serverError")?10:-1),r.R7$(4),r.Y8G("formControl",e.registrationFormService.form.controls.firstName),r.R7$(),r.vxM(null!=(f=e.registrationFormService.form.get("firstName"))&&f.touched&&null!=(f=e.registrationFormService.form.get("firstName"))&&f.hasError("required")?15:-1),r.R7$(),r.vxM(null!=(v=e.registrationFormService.form.get("firstName"))&&v.hasError("serverError")?16:-1),r.R7$(4),r.Y8G("formControl",e.registrationFormService.form.controls.lastName),r.R7$(),r.vxM(null!=(c=e.registrationFormService.form.get("lastName"))&&c.touched&&null!=(c=e.registrationFormService.form.get("lastName"))&&c.hasError("required")?21:-1),r.R7$(),r.vxM(null!=(E=e.registrationFormService.form.get("lastName"))&&E.hasError("serverError")?22:-1),r.R7$(4),r.Y8G("formControl",e.registrationFormService.form.controls.password),r.R7$(),r.vxM(null!=(d=e.registrationFormService.form.get("password"))&&d.touched&&null!=(d=e.registrationFormService.form.get("password"))&&d.hasError("required")?27:-1),r.R7$(),r.vxM(null!=(R=e.registrationFormService.form.get("password"))&&R.hasError("serverError")?28:-1),r.R7$(4),r.Y8G("formControl",e.registrationFormService.form.controls.retypedPassword),r.R7$(),r.vxM(null!=(l=e.registrationFormService.form.get("retypedPassword"))&&l.touched&&null!=(l=e.registrationFormService.form.get("retypedPassword"))&&l.hasError("required")?33:null!=(l=e.registrationFormService.form.get("retypedPassword"))&&l.hasError("mustMatch")?34:-1),r.R7$(2),r.vxM(e.registrationFormService.form.hasError("serverError")?35:-1),r.R7$(),r.Y8G("disabled",e.registrationFormService.form.invalid)}},dependencies:[m.X1,m.qT,m.me,m.BC,m.cb,m.l_,m.j4,u.RG,u.rl,u.nJ,u.TL,g.fS,g.fg,F.Hl,F.$z],styles:["[_nghost-%COMP%]{--registration-form-min-width: 360px}.registration-form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--space-xl)}.registration-header[_ngcontent-%COMP%]{font-size:var(--font-size-xl)}.registration-form[_ngcontent-%COMP%]{min-width:var(--registration-form-min-width);padding:var(--space-m);border-radius:24px;border:2px var(--border-color) solid;display:flex;flex-direction:column;gap:var(--space-s);align-items:center}.registration-form__field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}return t})()}}]);