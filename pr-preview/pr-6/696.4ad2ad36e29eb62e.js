"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[696],{5696:(M,m,t)=>{t.r(m),t.d(m,{LoginFormComponent:()=>L});var r=t(7788),g=t(7212),s=t(7222),a=t(6375),f=t(4587),c=t(2221),d=t(1051),h=t(4526),u=t(8823),p=t(7236),v=t(6409),F=t(922),E=t(8578),S=t(5860);class C extends S.b{constructor(l){super(),this.email=l.email,this.password=l.password}}var R=t(8825);let y=(()=>{class i{constructor(){this.formBuilder=(0,r.WQX)(s.Qk),this.form=this.initialize()}initialize(){return this.formBuilder.group({email:this.formBuilder.control("",[s.k0.required,s.k0.email]),password:this.formBuilder.control("",[s.k0.required])})}handleServerError(n){let o="";n.error.errors.forEach(e=>{e.attribute&&this.form.contains(e.attribute)?this.form.controls[e.attribute].setErrors({serverError:e.detail}):o+=`${e.detail}\n`}),this.form.setErrors({serverError:o})}getErrorMessage(n){const o=this.form.get(n);if(o){if(o.hasError("required")&&o.touched)return`${(0,R.Z)(n)} is required.`;if(o.hasError("email")&&o.touched&&"email"===n)return"Enter a valid email address."}return null}static#r=this.\u0275fac=function(o){return new(o||i)};static#o=this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function j(i,l){if(1&i&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&i){const n=r.XpG();r.R7$(),r.JRh(n.loginFormService.form.getError("serverError"))}}let L=(()=>{class i{constructor(){this.routerPaths=E.A,this.loginFormService=(0,r.WQX)(y),this.authorizationApiService=(0,r.WQX)(d.V),this.destroyRef=(0,r.WQX)(r.abz),this.changeDetectorRef=(0,r.WQX)(r.gRc),this.router=(0,r.WQX)(F.Ix)}onLoginSubmit(){if(this.loginFormService.form.invalid)return;const n=new C(this.loginFormService.form.getRawValue());this.authorizationApiService.login(n).pipe((0,g.pQ)(this.destroyRef),(0,h.W)(o=>(o instanceof v.yz&&(this.loginFormService.handleServerError(o),this.changeDetectorRef.markForCheck()),(0,u.$)(()=>o))),(0,p.M)(()=>{this.router.navigate([this.routerPaths.Main])})).subscribe()}static#r=this.\u0275fac=function(o){return new(o||i)};static#o=this.\u0275cmp=r.VBU({type:i,selectors:[["camp-login-form"]],standalone:!0,features:[r.aNF],decls:19,vars:6,consts:[[1,"login-form-wrapper"],[1,"login-header"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"login-form__field"],["matInput","","type","email","placeholder","ivan.pupkin@gmail.com",3,"formControl"],["matInput","","type","password","placeholder","veryStrongPassW0rd",3,"formControl"],["mat-raised-button","","type","submit"]],template:function(o,e){1&o&&(r.j41(0,"div",0)(1,"h2",1),r.EFF(2,"Login"),r.k0s(),r.j41(3,"form",2),r.bIt("ngSubmit",function(){return e.onLoginSubmit()}),r.j41(4,"mat-form-field",3)(5,"mat-label"),r.EFF(6,"Email"),r.k0s(),r.nrm(7,"input",4),r.j41(8,"mat-error"),r.EFF(9),r.k0s()(),r.j41(10,"mat-form-field",3)(11,"mat-label"),r.EFF(12,"Password"),r.k0s(),r.nrm(13,"input",5),r.j41(14,"mat-error"),r.EFF(15),r.k0s()(),r.DNE(16,j,2,1,"mat-error"),r.j41(17,"button",6),r.EFF(18," Login "),r.k0s()()()),2&o&&(r.R7$(3),r.Y8G("formGroup",e.loginFormService.form),r.R7$(4),r.Y8G("formControl",e.loginFormService.form.controls.email),r.R7$(2),r.JRh(e.loginFormService.getErrorMessage("email")),r.R7$(4),r.Y8G("formControl",e.loginFormService.form.controls.password),r.R7$(2),r.JRh(e.loginFormService.getErrorMessage("password")),r.R7$(),r.vxM(e.loginFormService.form.hasError("serverError")?16:-1))},dependencies:[s.X1,s.qT,s.me,s.BC,s.cb,s.l_,s.j4,a.RG,a.rl,a.nJ,a.TL,f.fS,f.fg,c.Hl,c.$z],styles:["[_nghost-%COMP%]{--login-form-min-width: 360px}.login-form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--space-xl)}.login-header[_ngcontent-%COMP%]{font-size:var(--font-size-xl)}.login-form[_ngcontent-%COMP%]{min-width:var(--login-form-min-width);padding:var(--space-m);border-radius:24px;border:2px var(--border-color) solid;display:flex;flex-direction:column;gap:var(--space-s);align-items:center}.login-form__field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}return i})()}}]);