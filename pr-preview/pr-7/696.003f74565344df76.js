"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[696],{5696:(M,d,e)=>{e.r(d),e.d(d,{LoginFormComponent:()=>z});var r=e(7788),g=e(7212),n=e(7222),m=e(5468),u=e(4587),c=e(2221),h=e(1051),p=e(7236),v=e(6409),F=e(922),E=e(8578),S=e(5860);class C extends S.b{constructor(s){super(),this.email=s.email,this.password=s.password}}let R=(()=>{class o{constructor(){this.formBuilder=(0,r.WQX)(n.Qk),this.form=this.initialize()}initialize(){return this.formBuilder.group({email:this.formBuilder.control("",[n.k0.required,n.k0.email]),password:this.formBuilder.control("",[n.k0.required])})}handleServerError(l){let i="";l.error.errors.forEach(t=>{t.attribute&&this.form.contains(t.attribute)?this.form.controls[t.attribute].setErrors({serverError:t.detail}):i+=`${t.detail}\n`}),this.form.setErrors({serverError:i})}static#r=this.\u0275fac=function(i){return new(i||o)};static#o=this.\u0275prov=r.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function b(o,s){1&o&&(r.j41(0,"mat-error"),r.EFF(1,"Email is required."),r.k0s())}function y(o,s){1&o&&(r.j41(0,"mat-error"),r.EFF(1,"Enter a valid email address."),r.k0s())}function L(o,s){1&o&&(r.j41(0,"mat-error"),r.EFF(1,"Password is required."),r.k0s())}function j(o,s){if(1&o&&(r.j41(0,"mat-error"),r.EFF(1),r.k0s()),2&o){const l=r.XpG();r.R7$(),r.JRh(l.loginFormService.form.getError("serverError"))}}let z=(()=>{class o{constructor(){this.routerPaths=E.A,this.loginFormService=(0,r.WQX)(R),this.authorizationApiService=(0,r.WQX)(h.V),this.destroyRef=(0,r.WQX)(r.abz),this.changeDetectorRef=(0,r.WQX)(r.gRc),this.router=(0,r.WQX)(F.Ix)}onLoginSubmit(){const l=new C(this.loginFormService.form.getRawValue());this.authorizationApiService.login(l).pipe((0,g.pQ)(this.destroyRef),(0,p.M)({next:()=>{this.router.navigate([this.routerPaths.Main])},error:i=>{i instanceof v.yz&&(this.loginFormService.handleServerError(i),this.changeDetectorRef.markForCheck())}})).subscribe()}static#r=this.\u0275fac=function(i){return new(i||o)};static#o=this.\u0275cmp=r.VBU({type:o,selectors:[["camp-login-form"]],standalone:!0,features:[r.aNF],decls:18,vars:7,consts:[[1,"login-form-wrapper"],[1,"login-header"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"login-form__field"],["matInput","","type","email","placeholder","ivan.pupkin@gmail.com",3,"formControl"],["matInput","","type","password","placeholder","veryStrongPassW0rd",3,"formControl"],["mat-raised-button","","type","submit",3,"disabled"]],template:function(i,t){if(1&i&&(r.j41(0,"div",0)(1,"h2",1),r.EFF(2,"Login"),r.k0s(),r.j41(3,"form",2),r.bIt("ngSubmit",function(){return t.onLoginSubmit()}),r.j41(4,"mat-form-field",3)(5,"mat-label"),r.EFF(6,"Email"),r.k0s(),r.nrm(7,"input",4),r.DNE(8,b,2,0,"mat-error")(9,y,2,0,"mat-error"),r.k0s(),r.j41(10,"mat-form-field",3)(11,"mat-label"),r.EFF(12,"Password"),r.k0s(),r.nrm(13,"input",5),r.DNE(14,L,2,0,"mat-error"),r.k0s(),r.DNE(15,j,2,1,"mat-error"),r.j41(16,"button",6),r.EFF(17," Login "),r.k0s()()()),2&i){let a,f;r.R7$(3),r.Y8G("formGroup",t.loginFormService.form),r.R7$(4),r.Y8G("formControl",t.loginFormService.form.controls.email),r.R7$(),r.vxM(null!=(a=t.loginFormService.form.get("email"))&&a.hasError("required")&&null!=(a=t.loginFormService.form.get("email"))&&a.touched?8:null!=(a=t.loginFormService.form.get("email"))&&a.hasError("email")&&null!=(a=t.loginFormService.form.get("email"))&&a.touched?9:-1),r.R7$(5),r.Y8G("formControl",t.loginFormService.form.controls.password),r.R7$(),r.vxM(null!=(f=t.loginFormService.form.get("password"))&&f.hasError("required")&&null!=(f=t.loginFormService.form.get("password"))&&f.touched?14:-1),r.R7$(),r.vxM(t.loginFormService.form.hasError("serverError")?15:-1),r.R7$(),r.Y8G("disabled",t.loginFormService.form.invalid)}},dependencies:[n.X1,n.qT,n.me,n.BC,n.cb,n.l_,n.j4,m.RG,m.rl,m.nJ,m.TL,u.fS,u.fg,c.Hl,c.$z],styles:["[_nghost-%COMP%]{--login-form-min-width: 360px}.login-form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:var(--space-xl)}.login-header[_ngcontent-%COMP%]{font-size:var(--font-size-xl)}.login-form[_ngcontent-%COMP%]{min-width:var(--login-form-min-width);padding:var(--space-m);border-radius:24px;border:2px var(--border-color) solid;display:flex;flex-direction:column;gap:var(--space-s);align-items:center}.login-form__field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}return o})()}}]);